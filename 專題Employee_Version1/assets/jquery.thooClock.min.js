!function(C){C.fn.thooClock=function(n){this.each(function(){var e,T,z,o,r,v,d;function m(e){var o;if(e instanceof Date)o=e;else{var r=e.split(":");o=new Date;for(var n=0;n<3;n++)r[n]=Math.floor(r[n]),(r[n]!=r[n]||59<r[n])&&(r[n]=0),0==n&&23<r[n]&&(r[n]=0);o.setHours(r[0],r[1],r[2])}return o}function u(e){return Math.PI/180*e}function f(e){return 12<=e&&(e-=12),e}function c(e){T.beginPath(),T.moveTo(0,0),T.lineTo(0,-1*e),T.stroke()}function h(e,o,r){var n=z.size/2.4;T.save(),T.lineWidth=parseInt(z.size/30,10),T.lineCap="butt",T.strokeStyle=o,e=function(e){var o,r;return void 0!==e&&(o=f(e.getHours()),r=e.getMinutes()),parseInt(o,10)+r/60}(e),T.rotate(u(30*e)),T.shadowColor="rgba(0,0,0,.5)",T.shadowBlur=parseInt(z.size/55,10),T.shadowOffsetX=parseInt(z.size/300,10),T.shadowOffsetY=parseInt(z.size/300,10),T.beginPath(),T.moveTo(0,0),T.lineTo(0,-1*(n-z.size/10)),T.stroke(),T.beginPath(),T.strokeStyle=r,T.moveTo(0,-1*(n-z.size/10)),T.lineTo(0,-1*n),T.stroke(),T.beginPath(),T.arc(0,0,parseInt(z.size/24,10),0,360,!1),T.fillStyle=o,T.fill(),T.restore()}function p(e){var o,r,n,t,a,i,s,l;o=new Date,z.timeCorrection&&("+"===z.timeCorrection.operator&&(o.setHours(o.getHours()+z.timeCorrection.hours),o.setMinutes(o.getMinutes()+z.timeCorrection.minutes)),"-"===z.timeCorrection.operator&&(o.setHours(o.getHours()-z.timeCorrection.hours),o.setMinutes(o.getMinutes()-z.timeCorrection.minutes))),n=o.getSeconds(),r=z.sweepingSeconds?o.getMilliseconds():0,t=(i=o.getMinutes())+n/60,s=f((a=o.getHours())+t/60),T.clearRect(-v,-v,z.size,z.size),function(e,o){var r,n,t,a,i,s,l,d,m,u,f,c,h,p,C,g;for(r=parseInt(v-z.size/50,10),n=v-z.size/400,T.beginPath(),T.arc(0,0,n,0,360,!1),T.fillStyle=o,T.fill(),t=1;t<=60;t+=1)a=Math.PI/30*t,i=Math.sin(a),s=Math.cos(a),t%5==0?(T.lineWidth=parseInt(z.size/50,10),l=i*(r-r/9),d=s*-(r-r/9),m=i*r,u=s*-r,f=i*(r-r/4.2),c=s*-(r-r/4.2),marker=t/5,T.textBaseline="middle",h=parseInt(z.size/13,10),T.font="100 "+h+"px "+z.numeralFont,T.beginPath(),T.fillStyle=e,z.showNumerals&&0<z.numerals.length&&z.numerals.map(function(e){marker==Object.keys(e)&&(p=T.measureText(e[marker]).width,T.fillText(e[marker],f-p/2,c))})):(T.lineWidth=parseInt(z.size/100,10),l=i*(r-r/20),d=s*-(r-r/20),m=i*r,u=s*-r),T.beginPath(),T.strokeStyle=e,T.lineCap="round",T.moveTo(l,d),T.lineTo(m,u),T.stroke();void 0!==z.brandText&&(T.font="100 "+parseInt(z.size/28,10)+"px "+z.brandFont,C=T.measureText(z.brandText).width,T.fillText(z.brandText,-C/2,z.size/6)),void 0!==z.brandText2&&(T.textBaseline="middle",T.font="100 "+parseInt(z.size/44,10)+"px "+z.brandFont,g=T.measureText(z.brandText2).width,T.fillText(z.brandText2,-g/2,z.size/5))}(z.dialColor,z.dialBackgroundColor),void 0!==z.alarmTime&&(z.alarmTime=m(z.alarmTime),h(z.alarmTime,z.alarmHandColor,z.alarmHandTipColor)),function(e,o){var r=z.size/3;T.save(),T.lineWidth=parseInt(z.size/25,10),T.lineCap="round",T.strokeStyle=o,T.rotate(u(30*e)),T.shadowColor="rgba(0,0,0,.5)",T.shadowBlur=parseInt(z.size/50,10),T.shadowOffsetX=parseInt(z.size/300,10),T.shadowOffsetY=parseInt(z.size/300,10),c(r),T.restore()}(s,z.hourHandColor),function(e,o){var r=z.size/2.2;T.save(),T.lineWidth=parseInt(z.size/50,10),T.lineCap="round",T.strokeStyle=o,z.sweepingMinutes||e.isInteger||(e=parseInt(e)),T.rotate(u(6*e)),T.shadowColor="rgba(0,0,0,.5)",T.shadowBlur=parseInt(z.size/50,10),T.shadowOffsetX=parseInt(z.size/250,10),T.shadowOffsetY=parseInt(z.size/250,10),c(r),T.restore()}(t,z.minuteHandColor),function(e,o,r){var n=v-z.size/40;T.save(),T.lineWidth=parseInt(z.size/150,10),T.lineCap="round",T.strokeStyle=r,T.rotate(u(.006*e+6*o)),T.shadowColor="rgba(0,0,0,.5)",T.shadowBlur=parseInt(z.size/80,10),T.shadowOffsetX=parseInt(z.size/200,10),T.shadowOffsetY=parseInt(z.size/200,10),c(n),T.beginPath(),T.moveTo(0,0),T.lineTo(0,n/15),T.lineWidth=parseInt(z.size/30,10),T.stroke(),T.beginPath(),T.arc(0,0,parseInt(z.size/30,10),0,360,!1),T.fillStyle=r,T.fill(),T.restore()}(r,n,z.secondHandColor),d!==n&&(C(z).trigger("onEverySecond"),d=n),void 0!==z.alarmTime&&(l=60*z.alarmTime.getHours()*60+60*z.alarmTime.getMinutes()+z.alarmTime.getSeconds()),l<=60*a*60+60*i+n&&(e+=1),e<=z.alarmCount&&0!==e&&C(z).trigger("onAlarm"),window.requestAnimationFrame(function(){p(e)})}o={size:250,dialColor:"#000000",dialBackgroundColor:"transparent",secondHandColor:"#F3A829",minuteHandColor:"#222222",hourHandColor:"#222222",alarmHandColor:"#FFFFFF",alarmHandTipColor:"#026729",timeCorrection:{operator:"+",hours:0,minutes:0},alarmCount:1,showNumerals:!0,numerals:[{1:1},{2:2},{3:3},{4:4},{5:5},{6:6},{7:7},{8:8},{9:9},{10:10},{11:11},{12:12}],sweepingMinutes:!0,sweepingSeconds:!1,numeralFont:"arial",brandFont:"arial"},r=C.extend({},o,n),(z=this).size=r.size,z.dialColor=r.dialColor,z.dialBackgroundColor=r.dialBackgroundColor,z.secondHandColor=r.secondHandColor,z.minuteHandColor=r.minuteHandColor,z.hourHandColor=r.hourHandColor,z.alarmHandColor=r.alarmHandColor,z.alarmHandTipColor=r.alarmHandTipColor,z.timeCorrection=r.timeCorrection,z.showNumerals=r.showNumerals,z.numerals=r.numerals,z.numeralFont=r.numeralFont,z.brandText=r.brandText,z.brandText2=r.brandText2,z.brandFont=r.brandFont,z.alarmCount=r.alarmCount,z.alarmTime=r.alarmTime,z.onAlarm=r.onAlarm,z.offAlarm=r.offAlarm,z.onEverySecond=r.onEverySecond,z.sweepingMinutes=r.sweepingMinutes,z.sweepingSeconds=r.sweepingSeconds,e=document.createElement("canvas"),T=e.getContext("2d"),e.width=this.size,e.height=this.size,C(e).appendTo(z),v=parseInt(z.size/2,10),T.translate(v,v),C.fn.thooClock.setAlarm=function(e){z.alarmTime=m(e)},C.fn.thooClock.clearAlarm=function(){z.alarmTime=void 0,p(0),C(z).trigger("offAlarm")},void 0!==z.onAlarm&&C(z).on("onAlarm",function(e){z.onAlarm(),e.preventDefault(),e.stopPropagation()}),void 0!==z.onEverySecond&&C(z).on("onEverySecond",function(e){z.onEverySecond(),e.preventDefault()}),void 0!==z.offAlarm&&C(z).on("offAlarm",function(e){z.offAlarm(),e.stopPropagation(),e.preventDefault()}),p(d=0)})}}(jQuery);